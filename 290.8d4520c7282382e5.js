"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[290],{5290:(f,p,c)=>{c.r(p),c.d(p,{CartComponent:()=>v});var u=c(6814),d=c(1120),t=c(4769),m=c(6286),a=c(9862);function g(o,C){if(1&o){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14),t._UZ(2,"img",15),t.qZA(),t.TgZ(3,"div",16)(4,"span",17),t._uU(5),t.qZA()(),t.TgZ(6,"div",18)(7,"i",19),t.NdJ("click",function(){const n=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.updateCartCount(null==n||null==n.product?null:n.product._id,n.count-1))}),t.qZA(),t.TgZ(8,"h3",20),t._uU(9),t.qZA(),t.TgZ(10,"i",21),t.NdJ("click",function(){const n=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.updateCartCount(null==n||null==n.product?null:n.product._id,n.count+1))}),t.qZA()(),t.TgZ(11,"div")(12,"h5",22),t._uU(13),t.qZA()(),t.TgZ(14,"div",23)(15,"i",24),t.NdJ("click",function(){const n=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.removeItem(null==n||null==n.product?null:n.product._id))}),t.qZA()()()}if(2&o){const e=C.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH),t.xp6(3),t.Oqu(e.product.title.split(" ").slice(0,3).join()),t.xp6(4),t.hij(" ",e.count," "),t.xp6(4),t.hij("",e.price," EGP")}}const i=function(o){return["/payment",o]};function s(o,C){if(1&o&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h4"),t._uU(6,"Shopping cart"),t.qZA()(),t.YNc(7,g,16,4,"div",7),t.TgZ(8,"div",8)(9,"button",9),t._uU(10,"Proceed to Pay"),t.qZA(),t.TgZ(11,"div",10)(12,"h3",11),t._uU(13,"Total : "),t.TgZ(14,"span",12),t._uU(15),t.qZA(),t._uU(16," EGP"),t.qZA()()()()()()()),2&o){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",e.cartDetails.products),t.xp6(2),t.Q6J("routerLink",t.VKq(3,i,e.cartDetails._id)),t.xp6(6),t.hij(" ",null==e.cartDetails?null:e.cartDetails.totalCartPrice,"")}}function h(o,C){1&o&&(t.TgZ(0,"h2"),t._uU(1,"Your Cart Empty..."),t.qZA())}let v=(()=>{class o{constructor(e,r){this._CartService=e,this._HttpClient=r,this.cartDetails=null}ngOnInit(){this._CartService.getCard().subscribe({next:e=>{console.log(e.data),this.cartDetails=e.data}})}removeItem(e){this._CartService.removeFromCart(e).subscribe({next:r=>{this.cartDetails=r.data,this._CartService.cartCount.next(r.numOfCartItems)}})}updateCartCount(e,r){this._CartService.updateCartCount(e,r).subscribe({next:l=>{this.cartDetails=l.data}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(m.N),t.Y36(a.eN))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","cover ",4,"ngIf","ngIfElse"],["empty",""],[1,"cover"],[1,"container"],[1,"d-flex","justify-content-center","row"],[1,"col-md-8"],[1,"p-2"],["class","d-flex flex-row justify-content-between align-items-center p-2 bg-white mt-4 px-3 rounded",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","align-items-center","mt-3","p-2","justify-content-between","rounded","w-100"],["type","button",1,"btn","btn-block","btn-lg","ml-2","pay-button",3,"routerLink"],[1,"total"],[1,"bg-dark","text-white","p-2","rounded-2"],[1,"fw-bold"],[1,"d-flex","flex-row","justify-content-between","align-items-center","p-2","bg-white","mt-4","px-3","rounded"],[1,"mr-1"],["width","100",1,"rounded",3,"src"],[1,"d-flex","flex-column","align-items-center","product-details"],[1,"font-weight-bold","fs-4"],[1,"d-flex","flex-row","align-items-center","qty"],[1,"fa","fa-minus","text-danger","cursor-pointer","fs-4",3,"click"],[1,"mt-1","mr-1","ml-1","p-3"],[1,"cursor-pointer","fa","fa-plus","text-success","fs-4",3,"click"],[1,"fs-4"],[1,"d-flex","align-items-center"],[1,"cursor-pointer","fa","fa-trash","mb-1","text-danger",3,"click"]],template:function(r,l){if(1&r&&(t.YNc(0,s,17,5,"div",0),t.YNc(1,h,2,0,"ng-template",null,1,t.W1O)),2&r){const n=t.MAs(2);t.Q6J("ngIf",l.cartDetails)("ngIfElse",n)}},dependencies:[u.ez,u.sg,u.O5,d.rH],styles:['@import"https://fonts.googleapis.com/css2?family=Manrope:wght@200&display=swap";.cover[_ngcontent-%COMP%]{font-family:Manrope,sans-serif}.size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .color[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}.product-deta[_ngcontent-%COMP%]{margin-right:70px}.gift-card[_ngcontent-%COMP%]:focus{box-shadow:none}.pay-button[_ngcontent-%COMP%], .pay-button[_ngcontent-%COMP%]:hover{color:#fff}.pay-button[_ngcontent-%COMP%]:focus{color:#fff;box-shadow:none}.text-grey[_ngcontent-%COMP%]{color:#a39f9f}.qty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px}.pay-button[_ngcontent-%COMP%]{background-color:#0aad0a}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}']})}return o})()},6286:(f,p,c)=>{c.d(p,{N:()=>m});var u=c(5619),d=c(4769),t=c(9862);let m=(()=>{class a{constructor(i){this._HttpClient=i,this.cartCount=new u.X(0)}addToCart(i){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:i})}getCard(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart")}removeFromCart(i){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${i}`)}updateCartCount(i,s){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${i}`,{count:s})}checkOut(i,s){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${i}?url=https://github.com/AbdelrahmanSaeed146/fresh-cart`,{shippingAddress:s})}static#t=this.\u0275fac=function(s){return new(s||a)(d.LFG(t.eN))};static#e=this.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);