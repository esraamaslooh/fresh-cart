"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[939],{939:(J,l,a)=>{a.r(l),a.d(l,{ForgetpasswordComponent:()=>I});var p=a(6814),s=a(95),m=a(3519),u=a.n(m),t=a(4769),c=a(1120),g=a(5881),f=a(9862);let _=(()=>{class o{constructor(e){this._HttpClient=e}forrgetPass(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",e)}resetCode(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",e)}resetpass(e){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(f.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function d(o,i){1&o&&(t.TgZ(0,"p",10),t._uU(1,"email is Required"),t.qZA())}function h(o,i){1&o&&(t.TgZ(0,"p",10),t._uU(1,"Email is Invalid"),t.qZA())}function x(o,i){if(1&o&&(t.TgZ(0,"div",8),t.YNc(1,d,2,0,"p",9),t.YNc(2,h,2,0,"p",9),t.qZA()),2&o){const e=t.oxw(2);let n,r;t.xp6(1),t.Q6J("ngIf",null==(n=e.emailform.get("email"))?null:n.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(r=e.emailform.get("email"))?null:r.hasError("email"))}}function C(o,i){if(1&o&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.userMess,"\n")}}function w(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.submitForm())}),t.TgZ(1,"p",3),t._uU(2,"Reset Password "),t.qZA(),t.TgZ(3,"label"),t._UZ(4,"input",4),t.YNc(5,x,3,2,"div",5),t.qZA(),t.TgZ(6,"button",6)(7,"span"),t._uU(8,"Submit"),t.qZA()(),t.YNc(9,C,2,1,"div",7),t.qZA()}if(2&o){const e=t.oxw();let n;t.Q6J("formGroup",e.emailform),t.xp6(5),t.Q6J("ngIf",(null==(n=e.emailform.get("email"))?null:n.errors)&&(null==(n=e.emailform.get("email"))?null:n.touched)),t.xp6(1),t.Q6J("disabled",!e.emailform.valid),t.xp6(3),t.Q6J("ngIf",e.userMess)}}function b(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"Submit"),t.qZA())}function v(o,i){1&o&&t._UZ(0,"i",15)}function P(o,i){if(1&o&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.userMess,"\n")}}function M(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.submitRestetForm())}),t.TgZ(1,"label"),t._UZ(2,"input",12),t.qZA(),t.TgZ(3,"button",6),t.YNc(4,b,2,0,"span",13),t.YNc(5,v,1,0,"i",14),t.qZA(),t.YNc(6,P,2,1,"div",7),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.resetCodeForm),t.xp6(3),t.Q6J("disabled",!e.resetCodeForm.valid),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",e.userMess)}}function F(o,i){1&o&&(t.TgZ(0,"p",10),t._uU(1," New password is Required"),t.qZA())}function O(o,i){1&o&&(t.TgZ(0,"p",10),t._uU(1,"Password must be at least 6 characters long"),t.qZA())}function Z(o,i){if(1&o&&(t.TgZ(0,"div",8),t.YNc(1,F,2,0,"p",9),t.YNc(2,O,2,0,"p",9),t.qZA()),2&o){const e=t.oxw(2);let n,r;t.xp6(1),t.Q6J("ngIf",null==(n=e.loginForm.get("password"))?null:n.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(r=e.loginForm.get("password"))?null:r.getError("pattern"))}}function T(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.submitRestetPass())}),t.TgZ(2,"label"),t._UZ(3,"input",17),t.YNc(4,Z,3,2,"div",5),t.qZA(),t.TgZ(5,"button",18),t._uU(6,"Submit"),t.qZA()()()}if(2&o){const e=t.oxw();let n;t.xp6(1),t.Q6J("formGroup",e.resetNewPassword),t.xp6(3),t.Q6J("ngIf",(null==(n=e.loginForm.get("password"))?null:n.errors)&&(null==(n=e.loginForm.get("password"))?null:n.touched))}}let I=(()=>{class o{constructor(e,n,r,N){this._router=e,this._AuthService=n,this._ForgetpassService=r,this._Router=N,this.loading=!1,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.userMess="",this.emailform=new s.cw({email:new s.NI(null,[s.kI.required,s.kI.email])}),this.resetCodeForm=new s.cw({resetCode:new s.NI(null,[s.kI.required])}),this.resetNewPassword=new s.cw({newPassword:new s.NI(null,[s.kI.required,s.kI.pattern(/^[a-zA-Z0-9_@]{6,}$/)])})}submitForm(){console.log(this.emailform.value);const e=this.emailform.value;this.email=e.email,this._ForgetpassService.forrgetPass(e).subscribe({next:n=>{console.log(n),this.userMess=n.message,this.step1=!1,this.step2=!0},error:n=>{console.log(n),this.userMess=n.error.message}})}submitRestetForm(){let e=this.resetCodeForm.value;this.loading=!0,this._ForgetpassService.resetCode(e).subscribe({next:n=>{console.log(n),"Success"==n.status&&(this.step2=!1,this.step3=!0,this.userMess=n.message)},error:n=>{console.log(n),this.userMess=n.error.message}})}submitRestetPass(){let e=this.resetNewPassword.value;e.email=this.email,console.log(e),this._ForgetpassService.resetpass(e).subscribe({next:n=>{console.log(n),this.userMess=n.message,n.token&&(localStorage.setItem("userToken",n.token),u().fire({toast:!1,position:"center",showConfirmButton:!0,icon:"success",showClass:{popup:"animate__animated animate__bounceInDown"},hideClass:{popup:"animate__animated animate__bounceOutDown"},title:"Your password has been successfully changed"}),this._Router.navigate(["/home"]))},error:n=>{console.log(n),this.userMess=n.error.message}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(c.F0),t.Y36(g.e),t.Y36(_),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-forgetpassword"]],standalone:!0,features:[t.jDz],decls:3,vars:3,consts:[["class","form container",3,"formGroup","ngSubmit",4,"ngIf"],["class","center-container mt-5",4,"ngIf"],[1,"form","container",3,"formGroup","ngSubmit"],[1,"title"],["type","email","placeholder","Email","formControlName","email",1,"input"],["class","alert alert-danger mt-2 w-50 p-1 mb-0",4,"ngIf"],[1,"btn","btn-success",3,"disabled"],["class","alert alert-info mt-2 w-50 p-1 mb-0 mx-auto text-center",4,"ngIf"],[1,"alert","alert-danger","mt-2","w-50","p-1","mb-0"],["class","mb-0 small",4,"ngIf"],[1,"mb-0","small"],[1,"alert","alert-info","mt-2","w-50","p-1","mb-0","mx-auto","text-center"],["type","text","placeholder","Reset Code","formControlName","resetCode",1,"input"],[4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"fas","fa-spinner","fa-spin"],[1,"center-container","mt-5"],["type","password","placeholder","New Password","formControlName","newPassword",1,"input"],[1,"btn","btn-success"]],template:function(n,r){1&n&&(t.YNc(0,w,10,4,"form",0),t.YNc(1,M,7,5,"form",0),t.YNc(2,T,7,2,"div",1)),2&n&&(t.Q6J("ngIf",r.step1),t.xp6(1),t.Q6J("ngIf",r.step2),t.xp6(1),t.Q6J("ngIf",r.step3))},dependencies:[p.ez,p.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:['.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;background-color:#fff;padding:20px;border-radius:20px;position:relative}.title[_ngcontent-%COMP%]{font-size:28px;color:#4169e1;font-weight:600;letter-spacing:-1px;position:relative;display:flex;align-items:center;padding-left:30px}.title[_ngcontent-%COMP%]:before, .title[_ngcontent-%COMP%]:after{position:absolute;content:"";height:16px;width:16px;border-radius:50%;left:0;background-color:#4169e1}.title[_ngcontent-%COMP%]:before{width:18px;height:18px;background-color:#4169e1}.title[_ngcontent-%COMP%]:after{width:18px;height:18px;animation:_ngcontent-%COMP%_pulse 1s linear infinite}.message[_ngcontent-%COMP%], .signin[_ngcontent-%COMP%]{color:#585757d2;font-size:14px}.signin[_ngcontent-%COMP%]{text-align:center}.signin[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4169e1}.signin[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{-webkit-text-decoration:underline royalblue;text-decoration:underline royalblue}.flex[_ngcontent-%COMP%]{display:flex;width:100%;gap:6px}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:100%;padding:10px 10px 20px;outline:0;border:1px solid rgba(105,105,105,.397);border-radius:10px}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;left:10px;top:15px;color:gray;font-size:.9em;cursor:text;transition:.3s ease}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:placeholder-shown + span[_ngcontent-%COMP%]{top:15px;font-size:.9em}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid + span[_ngcontent-%COMP%]{top:0;font-size:.7em;font-weight:600}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid + span[_ngcontent-%COMP%]{color:green}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.9);opacity:1}to{transform:scale(1.8);opacity:0}}']})}return o})()}}]);